"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.RawProvider = void 0;
const provider_1 = require("./provider");
const models_1 = require("../models");
const ckb_sdk_utils_1 = require("@nervosnetwork/ckb-sdk-utils");
const hashers_1 = require("../hashers");
const ecpair_1 = __importDefault(require("@nervosnetwork/ckb-sdk-utils/lib/ecpair"));
class RawProvider extends provider_1.Provider {
    constructor(privateKey) {
        super(provider_1.Platform.ckb);
        this.privateKey = privateKey;
        this.keyPair = new ecpair_1.default(privateKey);
    }
    async init() {
        const prefix = models_1.getDefaultPrefix();
        const address = ckb_sdk_utils_1.privateKeyToAddress(this.privateKey, { prefix });
        this.address = new models_1.Address(address, models_1.AddressType.ckb);
        return this;
    }
    hasher() {
        return new hashers_1.Blake2bHasher();
    }
    async sign(message) {
        const sig = this.keyPair.signRecoverable(message);
        return sig;
    }
    async close() {
        return true;
    }
}
exports.RawProvider = RawProvider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmF3LXByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Byb3ZpZGVycy9yYXctcHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEseUNBQWdEO0FBQ2hELHNDQUFtRTtBQUNuRSxnRUFBbUU7QUFDbkUsd0NBQW1EO0FBQ25ELHFGQUE2RDtBQUU3RCxNQUFhLFdBQVksU0FBUSxtQkFBUTtJQUV2QyxZQUFzQixVQUFrQjtRQUN0QyxLQUFLLENBQUMsbUJBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQURBLGVBQVUsR0FBVixVQUFVLENBQVE7UUFFdEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLGdCQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVELEtBQUssQ0FBQyxJQUFJO1FBQ1IsTUFBTSxNQUFNLEdBQUcseUJBQWdCLEVBQUUsQ0FBQztRQUVsQyxNQUFNLE9BQU8sR0FBRyxtQ0FBbUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUNqRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksZ0JBQU8sQ0FBQyxPQUFPLEVBQUUsb0JBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNyRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxNQUFNO1FBQ0osT0FBTyxJQUFJLHVCQUFhLEVBQUUsQ0FBQztJQUM3QixDQUFDO0lBRUQsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFlO1FBQ3hCLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztJQUVELEtBQUssQ0FBQyxLQUFLO1FBQ1QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0NBQ0Y7QUEzQkQsa0NBMkJDIn0=