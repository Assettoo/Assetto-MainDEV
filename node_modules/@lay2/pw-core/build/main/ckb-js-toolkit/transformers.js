"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.transformers = exports.TransformWitnessArgs = exports.TransformCellbaseWitness = exports.TransformBlock = exports.TransformUncleBlock = exports.TransformHeader = exports.TransformRawHeader = exports.TransformTransaction = exports.TransformRawTransaction = exports.TransformCellDep = exports.TransformCellOutput = exports.TransformCellInput = exports.TransformOutPoint = exports.TransformScript = void 0;
// This package provides transformer functions that transform JavaScript objects
// into JSON ready objects that can be passed to RPC. It following the following
// rules:
//
// 1. If the specified object has a serializeJson method, it would invoke this
// method and use the result to replace current object.
// 2. It then restricts the keys of the object to keys required by the specified
// entity(i.e., a Script would only have code_hash, hash_type, args keys),for each
// sub-field, it then recursively perform the steps here from step 1.
// 3. It then optionally run validator functions to ensure the resulting object
// follows specified rules.
//
// Note rule 1 here provides the flexibility in defining your own structures: you
// could define a class containing custom data structures, then provide a
// serializeJson that transforms the custom one into the rigid data structure
// required by CKB. You can also leverage the Reader class we provide as much as
// possible. Since Reader class does provide serializeJson methods, transformers
// here will transform them to valid hex strings required by CKB.
const validators = __importStar(require("./validators"));
function invokeSerializeJson(debugPath, value) {
    if (value instanceof Object && value.serializeJson instanceof Function) {
        return value.serializeJson.call(value);
    }
    return value;
}
function transformObject(debugPath, object, keys) {
    object = invokeSerializeJson(debugPath, object);
    if (!(object instanceof Object)) {
        throw new Error(`Transformed ${debugPath} is not an object!`);
    }
    const result = {};
    for (const [key, f] of Object.entries(keys)) {
        let value = object[key];
        if (!value) {
            const camelKey = key.replace(/(_[a-z])/g, (group) => group.toUpperCase().replace('_', ''));
            value = object[camelKey];
        }
        if (value) {
            result[key] = f(`${debugPath}.${key}`, value);
        }
    }
    return result;
}
function TransformScript(script, { validation = true, debugPath = 'script' } = {}) {
    script = transformObject(debugPath, script, {
        code_hash: invokeSerializeJson,
        hash_type: invokeSerializeJson,
        args: invokeSerializeJson,
    });
    if (validation) {
        validators.ValidateScript(script, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return script;
}
exports.TransformScript = TransformScript;
function TransformOutPoint(outPoint, { validation = true, debugPath = 'out_point' } = {}) {
    outPoint = transformObject(debugPath, outPoint, {
        tx_hash: invokeSerializeJson,
        index: invokeSerializeJson,
    });
    if (validation) {
        validators.ValidateOutPoint(outPoint, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return outPoint;
}
exports.TransformOutPoint = TransformOutPoint;
function toInvoke(transform) {
    return function (debugPath, value) {
        return transform(value, {
            validation: false,
            debugPath,
        });
    };
}
function TransformCellInput(cellInput, { validation = true, debugPath = 'cell_input' } = {}) {
    cellInput = transformObject(debugPath, cellInput, {
        since: invokeSerializeJson,
        previous_output: toInvoke(TransformOutPoint),
    });
    if (validation) {
        validators.ValidateCellInput(cellInput, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return cellInput;
}
exports.TransformCellInput = TransformCellInput;
function TransformCellOutput(cellOutput, { validation = true, debugPath = 'cell_output' } = {}) {
    cellOutput = transformObject(debugPath, cellOutput, {
        capacity: invokeSerializeJson,
        lock: toInvoke(TransformScript),
        type: toInvoke(TransformScript),
    });
    if (validation) {
        validators.ValidateCellOutput(cellOutput, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return cellOutput;
}
exports.TransformCellOutput = TransformCellOutput;
function TransformCellDep(cellDep, { validation = true, debugPath = 'cell_dep' } = {}) {
    cellDep = transformObject(debugPath, cellDep, {
        out_point: toInvoke(TransformOutPoint),
        dep_type: invokeSerializeJson,
    });
    if (validation) {
        validators.ValidateCellDep(cellDep, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return cellDep;
}
exports.TransformCellDep = TransformCellDep;
function toInvokeArray(invokeFunction) {
    return function (debugPath, array) {
        return array.map((item, i) => {
            return invokeFunction(`${debugPath}[${i}]`, item);
        });
    };
}
function TransformRawTransaction(rawTransaction, { validation = true, debugPath = 'raw_transaction' } = {}) {
    rawTransaction = transformObject(debugPath, rawTransaction, {
        version: invokeSerializeJson,
        cell_deps: toInvokeArray(toInvoke(TransformCellDep)),
        header_deps: toInvokeArray(invokeSerializeJson),
        inputs: toInvokeArray(toInvoke(TransformCellInput)),
        outputs: toInvokeArray(toInvoke(TransformCellOutput)),
        outputs_data: toInvokeArray(invokeSerializeJson),
    });
    if (validation) {
        validators.ValidateRawTransaction(rawTransaction, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return rawTransaction;
}
exports.TransformRawTransaction = TransformRawTransaction;
function TransformTransaction(transaction, { validation = true, debugPath = 'transaction' } = {}) {
    transaction = transformObject(debugPath, transaction, {
        version: invokeSerializeJson,
        cell_deps: toInvokeArray(toInvoke(TransformCellDep)),
        header_deps: toInvokeArray(invokeSerializeJson),
        inputs: toInvokeArray(toInvoke(TransformCellInput)),
        outputs: toInvokeArray(toInvoke(TransformCellOutput)),
        outputs_data: toInvokeArray(invokeSerializeJson),
        witnesses: toInvokeArray(invokeSerializeJson),
    });
    if (validation) {
        validators.ValidateTransaction(transaction, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return transaction;
}
exports.TransformTransaction = TransformTransaction;
function TransformRawHeader(rawHeader, { validation = true, debugPath = 'raw_header' } = {}) {
    rawHeader = transformObject(debugPath, rawHeader, {
        version: invokeSerializeJson,
        compact_target: invokeSerializeJson,
        timestamp: invokeSerializeJson,
        number: invokeSerializeJson,
        epoch: invokeSerializeJson,
        parent_hash: invokeSerializeJson,
        transactions_root: invokeSerializeJson,
        proposals_hash: invokeSerializeJson,
        uncles_hash: invokeSerializeJson,
        dao: invokeSerializeJson,
    });
    if (validation) {
        validators.ValidateRawHeader(rawHeader, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return rawHeader;
}
exports.TransformRawHeader = TransformRawHeader;
function TransformHeader(header, { validation = true, debugPath = 'header' } = {}) {
    header = transformObject(debugPath, header, {
        version: invokeSerializeJson,
        compact_target: invokeSerializeJson,
        timestamp: invokeSerializeJson,
        number: invokeSerializeJson,
        epoch: invokeSerializeJson,
        parent_hash: invokeSerializeJson,
        transactions_root: invokeSerializeJson,
        proposals_hash: invokeSerializeJson,
        uncles_hash: invokeSerializeJson,
        dao: invokeSerializeJson,
        nonce: invokeSerializeJson,
    });
    if (validation) {
        validators.ValidateHeader(header, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return header;
}
exports.TransformHeader = TransformHeader;
function TransformUncleBlock(uncleBlock, { validation = true, debugPath = 'uncle_block' } = {}) {
    uncleBlock = transformObject(debugPath, uncleBlock, {
        header: toInvoke(TransformHeader),
        proposals: toInvokeArray(invokeSerializeJson),
    });
    if (validation) {
        validators.ValidateUncleBlock(uncleBlock, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return uncleBlock;
}
exports.TransformUncleBlock = TransformUncleBlock;
function TransformBlock(block, { validation = true, debugPath = 'block' } = {}) {
    block = transformObject(debugPath, block, {
        header: toInvoke(TransformHeader),
        uncles: toInvokeArray(toInvoke(TransformUncleBlock)),
        transactions: toInvokeArray(toInvoke(TransformTransaction)),
        proposals: toInvokeArray(invokeSerializeJson),
    });
    if (validation) {
        validators.ValidateBlock(block, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return block;
}
exports.TransformBlock = TransformBlock;
function TransformCellbaseWitness(cellbaseWitness, { validation = true, debugPath = 'cellbase_witness' } = {}) {
    cellbaseWitness = transformObject(debugPath, cellbaseWitness, {
        lock: toInvoke(TransformScript),
        message: invokeSerializeJson,
    });
    if (validation) {
        validators.ValidateCellbaseWitness(cellbaseWitness, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return cellbaseWitness;
}
exports.TransformCellbaseWitness = TransformCellbaseWitness;
function TransformWitnessArgs(witnessArgs, { validation = true, debugPath = 'witness_args' } = {}) {
    witnessArgs = transformObject(debugPath, witnessArgs, {
        lock: invokeSerializeJson,
        input_type: invokeSerializeJson,
        output_type: invokeSerializeJson,
    });
    if (validation) {
        validators.ValidateWitnessArgs(witnessArgs, {
            debugPath: `(transformed) ${debugPath}`,
        });
    }
    return witnessArgs;
}
exports.TransformWitnessArgs = TransformWitnessArgs;
exports.transformers = {
    TransformScript,
    TransformOutPoint,
    TransformCellInput,
    TransformCellOutput,
    TransformCellDep,
    TransformRawTransaction,
    TransformTransaction,
    TransformRawHeader,
    TransformHeader,
    TransformUncleBlock,
    TransformBlock,
    TransformCellbaseWitness,
    TransformWitnessArgs,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmb3JtZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NrYi1qcy10b29sa2l0L3RyYW5zZm9ybWVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsZ0ZBQWdGO0FBQ2hGLGdGQUFnRjtBQUNoRixTQUFTO0FBQ1QsRUFBRTtBQUNGLDhFQUE4RTtBQUM5RSx1REFBdUQ7QUFDdkQsZ0ZBQWdGO0FBQ2hGLGtGQUFrRjtBQUNsRixxRUFBcUU7QUFDckUsK0VBQStFO0FBQy9FLDJCQUEyQjtBQUMzQixFQUFFO0FBQ0YsaUZBQWlGO0FBQ2pGLHlFQUF5RTtBQUN6RSw2RUFBNkU7QUFDN0UsZ0ZBQWdGO0FBQ2hGLGdGQUFnRjtBQUNoRixpRUFBaUU7QUFDakUseURBQTJDO0FBRTNDLFNBQVMsbUJBQW1CLENBQUMsU0FBUyxFQUFFLEtBQUs7SUFDM0MsSUFBSSxLQUFLLFlBQVksTUFBTSxJQUFJLEtBQUssQ0FBQyxhQUFhLFlBQVksUUFBUSxFQUFFO1FBQ3RFLE9BQU8sS0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDeEM7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUFFRCxTQUFTLGVBQWUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUk7SUFDOUMsTUFBTSxHQUFHLG1CQUFtQixDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUNoRCxJQUFJLENBQUMsQ0FBQyxNQUFNLFlBQVksTUFBTSxDQUFDLEVBQUU7UUFDL0IsTUFBTSxJQUFJLEtBQUssQ0FBQyxlQUFlLFNBQVMsb0JBQW9CLENBQUMsQ0FBQztLQUMvRDtJQUNELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUVsQixLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtR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