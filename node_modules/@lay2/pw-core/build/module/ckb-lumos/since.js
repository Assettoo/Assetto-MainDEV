function parseSince(since) {
    since = BigInt(since);
    const flag = since >> BigInt(56);
    const metricFlag = (flag >> BigInt(5)) & BigInt("0b11");
    let type;
    let value;
    if (metricFlag === BigInt(0b00)) {
        type = "blockNumber";
        value = since & BigInt("0xFFFFFFFFFFFFFF");
    }
    else if (metricFlag === BigInt(0b01)) {
        type = "epochNumber";
        value = {
            length: Number((since >> BigInt(40)) & BigInt(0xffff)),
            index: Number((since >> BigInt(24)) & BigInt(0xffff)),
            number: Number(since & BigInt(0xffffff)),
        };
    }
    else if (metricFlag === BigInt(0b10)) {
        type = "blockTimestamp";
        value = since & BigInt("0xFFFFFFFFFFFFFF");
    }
    else {
        throw new Error("Invalid metric flag!");
    }
    return {
        relative: (flag & BigInt("0x80")) !== BigInt(0),
        type,
        value,
    };
}
function generateSince({ relative, type, value }) {
    let flag = BigInt(0);
    if (relative) {
        flag += BigInt(0b10000000);
    }
    if (type === "epochNumber") {
        flag += BigInt(0b00100000);
    }
    else if (type === "blockTimestamp") {
        flag += BigInt(0b01000000);
    }
    let v;
    if (typeof value === "object") {
        v = BigInt(generateHeaderEpoch(value));
    }
    else {
        v = BigInt(value);
    }
    // TODO: check v is valid
    return _toHex((flag << BigInt(56)) + v);
}
function parseEpoch(epoch) {
    epoch = BigInt(epoch);
    return {
        length: Number((epoch >> BigInt(40)) & BigInt(0xffff)),
        index: Number((epoch >> BigInt(24)) & BigInt(0xffff)),
        number: Number(epoch & BigInt(0xffffff)),
    };
}
function maximumAbsoluteEpochSince(...args) {
    const parsedArgs = args.map((arg) => parseAbsoluteEpochSince(arg));
    const maxNumber = Math.max(...parsedArgs.map((arg) => arg.number));
    const maxArgs = parsedArgs.filter((arg) => arg.number === maxNumber);
    let max = maxArgs[0];
    for (let i = 1; i < maxArgs.length; ++i) {
        const current = maxArgs[i];
        if (BigInt(current.index) * BigInt(max.length) >=
            BigInt(max.index) * BigInt(current.length)) {
            max = current;
        }
    }
    return generateAbsoluteEpochSince(max);
}
function generateAbsoluteEpochSince({ length, index, number }) {
    return generateSince({
        relative: false,
        type: "epochNumber",
        value: { length, index, number },
    });
}
function generateHeaderEpoch({ length, index, number }) {
    return _toHex((BigInt(length) << BigInt(40)) +
        (BigInt(index) << BigInt(24)) +
        BigInt(number));
}
function parseAbsoluteEpochSince(since) {
    const { relative, type, value } = parseSince(since);
    if (!(relative === false && type === "epochNumber")) {
        throw new Error("Since format error!");
    }
    return value;
}
function validateAbsoluteEpochSince(since, tipHeaderEpoch) {
    const { value } = parseSince(since);
    const headerEpochParams = parseEpoch(BigInt(tipHeaderEpoch));
    return (value.number < headerEpochParams.number ||
        (value.number === headerEpochParams.number &&
            BigInt(value.index) * BigInt(headerEpochParams.length) <=
                BigInt(headerEpochParams.index) * BigInt(value.length)));
}
function validateSince(since, tipSinceValidationInfo, cellSinceValidationInfo) {
    const { relative, type, value } = parseSince(since);
    if (!relative) {
        if (type === "epochNumber") {
            return validateAbsoluteEpochSince(since, tipSinceValidationInfo.epoch);
        }
        if (type === "blockNumber") {
            return value <= BigInt(tipSinceValidationInfo.block_number);
        }
        if (type === "blockTimestamp") {
            if (!tipSinceValidationInfo.median_timestamp) {
                throw new Error(`Must provide tip median_timestamp!`);
            }
            return value * BigInt(1000) <= BigInt(tipSinceValidationInfo.median_timestamp);
        }
    }
    else {
        if (type === "epochNumber") {
            const tipHeaderEpoch = parseEpoch(BigInt(tipSinceValidationInfo.epoch));
            const sinceHeaderEpoch = parseEpoch(BigInt(cellSinceValidationInfo.epoch));
            const added = {
                number: BigInt(value.number + sinceHeaderEpoch.number),
                index: BigInt(value.index) * BigInt(sinceHeaderEpoch.length) +
                    BigInt(sinceHeaderEpoch.index) * BigInt(value.length),
                length: BigInt(value.length) * BigInt(sinceHeaderEpoch.length),
            };
            if (value.length === 0 && sinceHeaderEpoch.length !== 0) {
                added.index = BigInt(sinceHeaderEpoch.index);
                added.length = BigInt(sinceHeaderEpoch.length);
            }
            else if (sinceHeaderEpoch.length === 0 && value.length !== 0) {
                added.index = BigInt(value.index);
                added.length = BigInt(value.length);
            }
            if (added.length && added.index >= added.length) {
                added.number += added.index / added.length;
                added.index = added.index % added.length;
            }
            return (added.number < BigInt(tipHeaderEpoch.number) ||
                (added.number === BigInt(tipHeaderEpoch.number) &&
                    added.index * BigInt(tipHeaderEpoch.length) <=
                        BigInt(tipHeaderEpoch.index) * added.length));
        }
        if (type === "blockNumber") {
            return (value + BigInt(cellSinceValidationInfo.block_number) <=
                BigInt(tipSinceValidationInfo.block_number));
        }
        if (type === "blockTimestamp") {
            if (!tipSinceValidationInfo.median_timestamp ||
                !cellSinceValidationInfo.median_timestamp) {
                throw new Error(`Must provide median_timestamp!`);
            }
            return (value * BigInt(1000) + BigInt(cellSinceValidationInfo.median_timestamp) <=
                BigInt(tipSinceValidationInfo.median_timestamp));
        }
    }
}
function _toHex(num) {
    return "0x" + num.toString(16);
}
module.exports = {
    parseSince,
    parseEpoch,
    maximumAbsoluteEpochSince,
    generateAbsoluteEpochSince,
    parseAbsoluteEpochSince,
    validateAbsoluteEpochSince,
    validateSince,
    generateSince,
    generateHeaderEpoch,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2luY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY2tiLWx1bW9zL3NpbmNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFNBQVMsVUFBVSxDQUFDLEtBQUs7SUFDdkIsS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN0QixNQUFNLElBQUksR0FBRyxLQUFLLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pDLE1BQU0sVUFBVSxHQUFHLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN4RCxJQUFJLElBQUksQ0FBQztJQUNULElBQUksS0FBSyxDQUFDO0lBQ1YsSUFBSSxVQUFVLEtBQUssTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQy9CLElBQUksR0FBRyxhQUFhLENBQUM7UUFDckIsS0FBSyxHQUFHLEtBQUssR0FBRyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQztLQUM1QztTQUFNLElBQUksVUFBVSxLQUFLLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUN0QyxJQUFJLEdBQUcsYUFBYSxDQUFDO1FBQ3JCLEtBQUssR0FBRztZQUNOLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3RELEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3JELE1BQU0sRUFBRSxNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUN6QyxDQUFDO0tBQ0g7U0FBTSxJQUFJLFVBQVUsS0FBSyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7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