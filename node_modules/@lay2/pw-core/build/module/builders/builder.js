import { Amount, AmountUnit } from '../models';
import PWCore, { ChainID } from '..';
const FEE_BASE = 1000;
export class Builder {
    constructor(feeRate = Builder.MIN_FEE_RATE, collector = PWCore.defaultCollector, witnessArgs = PWCore.chainId === ChainID.ckb
        ? Builder.WITNESS_ARGS.RawSecp256k1
        : Builder.WITNESS_ARGS.Secp256k1) {
        this.feeRate = feeRate;
        this.collector = collector;
        this.witnessArgs = witnessArgs;
    }
    static calcFee(tx, feeRate = Builder.MIN_FEE_RATE) {
        if (feeRate < Builder.MIN_FEE_RATE) {
            feeRate = Builder.MIN_FEE_RATE;
        }
        const txSize = tx.getSize();
        const fee = (feeRate / FEE_BASE) * txSize;
        return new Amount(fee.toString(), AmountUnit.shannon);
    }
    getFee() {
        return this.fee;
    }
}
Builder.MIN_FEE_RATE = 1000;
Builder.MIN_CHANGE = new Amount('61', AmountUnit.ckb);
Builder.WITNESS_ARGS = {
    Secp256k1: {
        lock: '0x' + '0'.repeat(132),
        input_type: '',
        output_type: '',
    },
    RawSecp256k1: {
        lock: '0x' + '0'.repeat(130),
        input_type: '',
        output_type: '',
    },
    Secp256r1: {
        lock: '0x' + '0'.repeat(600),
        input_type: '',
        output_type: '',
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9idWlsZGVycy9idWlsZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFlLE1BQU0sV0FBVyxDQUFDO0FBRTVELE9BQU8sTUFBTSxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sSUFBSSxDQUFDO0FBR3JDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQztBQVN0QixNQUFNLE9BQWdCLE9BQU87SUFtQzNCLFlBQ1ksVUFBa0IsT0FBTyxDQUFDLFlBQVksRUFDdEMsWUFBdUMsTUFBTSxDQUFDLGdCQUFnQixFQUM5RCxjQUEyQixNQUFNLENBQUMsT0FBTyxLQUFLLE9BQU8sQ0FBQyxHQUFHO1FBQ2pFLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLFlBQVk7UUFDbkMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsU0FBUztRQUp4QixZQUFPLEdBQVAsT0FBTyxDQUErQjtRQUN0QyxjQUFTLEdBQVQsU0FBUyxDQUFxRDtRQUM5RCxnQkFBVyxHQUFYLFdBQVcsQ0FFYTtJQUNqQyxDQUFDO0lBcEJKLE1BQU0sQ0FBQyxPQUFPLENBQ1osRUFBZSxFQUNmLFVBQWtCLE9BQU8sQ0FBQyxZQUFZO1FBRXRDLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxZQUFZLEVBQUU7WUFDbEMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUM7U0FDaEM7UUFDRCxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDNUIsTUFBTSxHQUFHLEdBQUcsQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLEdBQUcsTUFBTSxDQUFDO1FBQzFDLE9BQU8sSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBWUQsTUFBTTtRQUNKLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDOztBQTVDZSxvQkFBWSxHQUFHLElBQUksQ0FBQztBQUNwQixrQkFBVSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDOUMsb0JBQVksR0FBRztJQUM3QixTQUFTLEVBQUU7UUFDVCxJQUFJLEVBQUUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQzVCLFVBQVUsRUFBRSxFQUFFO1FBQ2QsV0FBVyxFQUFFLEVBQUU7S0FDaEI7SUFDRCxZQUFZLEVBQUU7UUFDWixJQUFJLEVBQUUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQzVCLFVBQVUsRUFBRSxFQUFFO1FBQ2QsV0FBVyxFQUFFLEVBQUU7S0FDaEI7SUFDRCxTQUFTLEVBQUU7UUFDVCxJQUFJLEVBQUUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQzVCLFVBQVUsRUFBRSxFQUFFO1FBQ2QsV0FBVyxFQUFFLEVBQUU7S0FDaEI7Q0FDRixDQUFDIn0=