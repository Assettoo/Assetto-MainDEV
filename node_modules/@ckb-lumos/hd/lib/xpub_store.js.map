{"version":3,"sources":["../src/xpub_store.ts"],"names":["XPubStore","constructor","accountExtendedPublicKey","toAccountExtendedPublicKey","save","path","overwrite","fs","existsSync","Error","writeFileSync","toJson","JSON","stringify","xpubkey","serialize","slice","load","json","readFileSync","xpub","parse","AccountExtendedPublicKey"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEO,MAAMA,SAAN,CAAgB;AAGrBC,EAAAA,WAAW,CAACC,wBAAD,EAAqD;AAC9D,SAAKA,wBAAL,GAAgCA,wBAAhC;AACD;;AAEDC,EAAAA,0BAA0B,GAA6B;AACrD,WAAO,KAAKD,wBAAZ;AACD;;AAEDE,EAAAA,IAAI,CACFC,IADE,EAEF;AACEC,IAAAA,SAAS,GAAG;AADd,MAII,EANF,EAOF;AACA,QAAI,CAACA,SAAD,IAAcC,YAAGC,UAAH,CAAcH,IAAd,CAAlB,EAAuC;AACrC,YAAM,IAAII,KAAJ,CAAU,2BAAV,CAAN;AACD;;AACDF,gBAAGG,aAAH,CAAiBL,IAAjB,EAAuB,KAAKM,MAAL,EAAvB;AACD;;AAEDA,EAAAA,MAAM,GAAW;AACf,WAAOC,IAAI,CAACC,SAAL,CAAe;AACpBC,MAAAA,OAAO,EAAE,KAAKZ,wBAAL,CAA8Ba,SAA9B,GAA0CC,KAA1C,CAAgD,CAAhD;AADW,KAAf,CAAP;AAGD;;AAEU,SAAJC,IAAI,CAACZ,IAAD,EAA0B;AACnC,UAAMa,IAAI,GAAGX,YAAGY,YAAH,CAAgBd,IAAhB,EAAsB,OAAtB,CAAb;;AACA,UAAMe,IAAI,GAAGR,IAAI,CAACS,KAAL,CAAWH,IAAX,EAAiBJ,OAA9B;;AACA,UAAMZ,wBAAwB,GAAGoB,uCAAyBD,KAAzB,CAC/B,OAAOD,IADwB,CAAjC;;AAGA,WAAO,IAAIpB,SAAJ,CAAcE,wBAAd,CAAP;AACD;;AAtCoB","sourcesContent":["import { AccountExtendedPublicKey } from \"./extended_key\";\nimport fs from \"fs\";\n\nexport class XPubStore {\n  private accountExtendedPublicKey: AccountExtendedPublicKey;\n\n  constructor(accountExtendedPublicKey: AccountExtendedPublicKey) {\n    this.accountExtendedPublicKey = accountExtendedPublicKey;\n  }\n\n  toAccountExtendedPublicKey(): AccountExtendedPublicKey {\n    return this.accountExtendedPublicKey;\n  }\n\n  save(\n    path: string,\n    {\n      overwrite = false,\n    }: {\n      overwrite?: boolean;\n    } = {}\n  ) {\n    if (!overwrite && fs.existsSync(path)) {\n      throw new Error(\"XPub file already exists!\");\n    }\n    fs.writeFileSync(path, this.toJson());\n  }\n\n  toJson(): string {\n    return JSON.stringify({\n      xpubkey: this.accountExtendedPublicKey.serialize().slice(2),\n    });\n  }\n\n  static load(path: string): XPubStore {\n    const json = fs.readFileSync(path, \"utf-8\");\n    const xpub = JSON.parse(json).xpubkey;\n    const accountExtendedPublicKey = AccountExtendedPublicKey.parse(\n      \"0x\" + xpub\n    );\n    return new XPubStore(accountExtendedPublicKey);\n  }\n}\n"],"file":"xpub_store.js"}